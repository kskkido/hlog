(()=>{var Io=Object.create;var Bt=Object.defineProperty;var zo=Object.getOwnPropertyDescriptor;var Yo=Object.getOwnPropertyNames;var $o=Object.getPrototypeOf,No=Object.prototype.hasOwnProperty;var I=t=>Bt(t,"__esModule",{value:!0});var o=(t=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(t,{get:(e,r)=>(typeof require!="undefined"?require:e)[r]}):t)(function(t){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+t+'" is not supported')});var p=(t,e)=>{I(t);for(var r in e)Bt(t,r,{get:e[r],enumerable:!0})},Ko=(t,e,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of Yo(e))!No.call(t,n)&&n!=="default"&&Bt(t,n,{get:()=>e[n],enumerable:!(r=zo(e,n))||r.enumerable});return t},s=t=>Ko(I(Bt(t!=null?Io($o(t)):{},"default",t&&t.__esModule&&"default"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);var W=s(o("rxjs"));var F=s(o("rxjs"));var A={};p(A,{between:()=>cs,concat:()=>ys,reverse:()=>fs,types:()=>ye});var z=s(o("fp-ts/function"));var v={};p(v,{after:()=>ts,apply:()=>ce,at:()=>C,chain:()=>Go,contramap:()=>Xo,liftA2:()=>Br,map:()=>jr,pure:()=>le,sequence:()=>Qo,snapshot:()=>os,tap:()=>Jo,time:()=>es,transform:()=>rs,until:()=>Zo});var Rr=s(o("fp-ts/function"));var xt=t=>t[0];var kt=t=>t[1];var C=t=>e=>t(e),le=t=>e=>t,jr=t=>e=>r=>t(e(r)),Xo=t=>e=>r=>e(t(r)),Go=t=>e=>r=>t(e(r))(r),ce=t=>e=>r=>e(r)(t(r)),Br=t=>e=>r=>(0,Rr.pipe)(e,jr(t),ce(r)),Jo=ce(le),Qo=t=>t.reduce((e,r)=>Br(n=>m=>[...n,m])(e)(r),le([])),Zo=t=>e=>r=>r<xt(t)?C(e)(r):C(kt(t))(r),ts=t=>e=>r=>r>xt(t)?C(e)(r):C(kt(t))(r),es=t=>t,rs=t=>e=>r=>C(e)(C(t)(r)),os=t=>e=>[xt(t),[kt(t),C(e)(xt(t))]];var Lt={};p(Lt,{between:()=>as,distance:()=>is});var as=t=>e=>t[0]<=e&&e<=t[1],is=t=>t[1]-t[0];var ye={};I(ye);var cs=t=>e=>(0,z.pipe)(e,v.after([t[0],v.pure(e(0))]),v.until([t[1],v.pure(e(1))]),v.contramap(r=>r-t[0]/Lt.distance(t))),ys=t=>(0,z.pipe)(v.sequence(t),v.map((0,z.constant)(null))),fs=t=>(0,z.pipe)(t,v.contramap(e=>1-e));var B={};p(B,{from:()=>de,to:()=>be});var de={};p(de,{string:()=>ds,unknown:()=>us});var fe=s(o("fp-ts/function")),M=s(o("fp-ts/Option")),ds=t=>(0,fe.pipe)(M.of(new DOMParser().parseFromString(t,"text/html")),M.chain(e=>(0,fe.pipe)(M.guard(!e.querySelector("parsererror")),M.apSecond(M.fromNullable(e.body.firstElementChild))))),us=t=>M.fromNullable(t instanceof Element?t:null);var be={};p(be,{closest:()=>hs,computedStyle:()=>Lr,htmlElement:()=>Es,matrix:()=>Cr,parentStream:()=>Hr,position:()=>As,shape:()=>kr,translate:()=>bs});var Ae=s(o("fp-ts/function")),Ct=s(o("fp-ts/Option"));var ue=t=>e=>[t,e];var kr=t=>{let e=t.getBoundingClientRect();return{width:e.width,height:e.height,position:ue(e.x)(e.y)}},As=t=>kr(t).position,Lr=t=>e=>e.getComputedStyle(t,null),Cr=t=>e=>(0,Ae.pipe)(Lr(t)(e),r=>r.getPropertyValue("transform")||r.getPropertyValue("-moz-transform")||r.getPropertyValue("-webkit-transform")||r.getPropertyValue("-ms-transform")||r.getPropertyValue("-o-transform"),r=>r.split("(")[1].split(")")[0].split(",")),bs=t=>e=>(0,Ae.pipe)(Cr(t)(e),r=>ue(r[4])(r[5])),hs=t=>e=>{for(let r of Array.from(Hr(e)))if(Element.prototype.matches.call(r,t))return r;return null},Hr=function*(t){let e=t;do yield e,e=e.parentElement||e.parentNode;while(e!==null&&e.nodeType===1)},Es=t=>t instanceof HTMLElement?Ct.of(t):Ct.none;var f={};p(f,{between:()=>ws,clamp:()=>he,degree:()=>Ss,hypotenuse:()=>gs,lerp:()=>Wr,lerpW:()=>vs,margin:()=>Fr,percent:()=>Os,radian:()=>Ts,range:()=>Ms});var he=(t,e,r)=>r>=e?Math.min(Math.max(t,e),r):he(t,r,e),Os=t=>he(100*t,0,100),gs=(t,e)=>Math.sqrt(Math.pow(t,2)+Math.pow(e,2)),Ts=t=>t*(Math.PI/180),Ss=t=>t*180/Math.PI,Fr=(t,e)=>e===0?t:-(1-t/e),Wr=(t,e,r)=>(1-r)*t+r*e,vs=(t,e,r)=>n=>Wr(t,e,Math.abs(Fr(t,e))<n?1:r),Ms=(t,e)=>e>=t?[t,e]:[e,t],ws=t=>e=>t[0]<=e&&e<=t[1];var Rs=s(o("fp-ts/function")),js=s(o("fp-ts/Option"));var ks=s(o("fp-ts/function")),Vr=s(o("fp-ts/Option"));var Pr=s(o("fp-ts/Option"));var Hs=s(o("fp-ts/function"));var i={};p(i,{action:()=>Ee,actionCreator:()=>w,reducer:()=>V,types:()=>Oe});var Ee={};p(Ee,{noop:()=>Vs});var Vs={type:"@noop",payload:void 0};var w={};p(w,{from:()=>Ps});var Ps=t=>e=>Object.assign(r=>({payload:t(r),type:e}),{type:e});var V={};p(V,{combine:()=>_s,from:()=>Ds});var Ds=(t,e)=>(r=t,n)=>{let m=e[n.type];return m?m(r,n):r},_s=(t,e)=>(r=e,n)=>Object.keys(t).reduce((m,u)=>(m[u]=t[u](r[u],n),m),r);var Oe={};I(Oe);var bt={};p(bt,{append:()=>qs,fromLocation:()=>Is,normalize:()=>Ht});var Ht=t=>t.replace(/(?<!\:)\/{2,}/,"/"),qs=t=>e=>t.length>0?Ht(t.startsWith("?")||t.startsWith("#")||/^\/*\?/.test(t)?`${e.replace(/\/*$/,"")}${t.replace(/^\/*/,"")}`:`${e}/${t}`):Ht(e),Is=t=>Ht([t.origin,t.pathname].join(""));var Ft={};p(Ft,{empty:()=>zs,types:()=>ge});var ge={};I(ge);var zs={};var b={};p(b,{cursor:()=>ve,history:()=>sr,phase:()=>ar,postFilter:()=>lr,postMetadataRecord:()=>fr,root:()=>jt,scroll:()=>xr,tagFilter:()=>Er,tagMetadataRecord:()=>Tr});var ve={};p(ve,{actions:()=>Se,reducers:()=>Y});var Se={};p(Se,{set:()=>Te});var _r=s(o("fp-ts/function"));var Te=w.from(_r.identity)("cursor/set");var Y={};p(Y,{initialState:()=>qr,main:()=>Ys});var qr=[0,0],Ys=V.from(qr,{[Te.type]:(t,e)=>e.payload});var sr={};p(sr,{actions:()=>je,reducers:()=>mt});var je={};p(je,{back:()=>we,forward:()=>Re,push:()=>Me});var Wt=s(o("fp-ts/function"));var Me=w.from(Wt.identity)("history/push"),we=w.from(Wt.identity)("history/back"),Re=w.from(Wt.identity)("history/forward");var mt={};p(mt,{initialState:()=>Eo,main:()=>Sn});var ht=s(o("io-ts")),ta=ht.tuple([ht.number,ht.number]);var Xs=s(o("fp-ts/function")),Ir=s(o("fp-ts/Array")),Gs=s(o("fp-ts/Option"));var $=s(o("io-ts")),Ks=new $.Type("Element",t=>t instanceof HTMLElement,(t,e)=>t instanceof HTMLElement?$.success(t):$.failure(t,e),t=>t);var Et={};p(Et,{from:()=>Le,to:()=>Fe,types:()=>ke});var Le={};p(Le,{unknown:()=>Nr,window:()=>tp});var Yr=s(o("fp-ts/function")),Vt=s(o("fp-ts/ReadonlyArray")),$r=s(o("fp-ts/Option"));var ke={};p(ke,{FooterElement:()=>Be});var N=s(o("io-ts")),Be=new N.Type("HTMLElement",t=>t instanceof HTMLElement,(t,e)=>t instanceof HTMLElement?N.success(t):N.failure(t,e),t=>t);var tp=t=>Vt.compact((0,Yr.pipe)(Array.from(t.document.querySelectorAll('*[data-type~="footer"]')),Vt.map(Nr))),Nr=t=>$r.fromEither(Be.decode(t));var Fe={};p(Fe,{children:()=>pp,itemElements:()=>np});var X={};p(X,{element:()=>op,unknown:()=>He,window:()=>rp});var Ce=s(o("fp-ts/function")),U=s(o("fp-ts/ReadonlyArray")),Ur=s(o("fp-ts/Option"));var K=s(o("io-ts")),Kr=new K.Type("HTMLElement",t=>t instanceof HTMLElement,(t,e)=>t instanceof HTMLElement?K.success(t):K.failure(t,e),t=>t);var rp=t=>U.compact((0,Ce.pipe)(Array.from(t.document.querySelectorAll('*[data-type~="item"]')),U.map(He))),op=t=>U.compact((0,Ce.pipe)(Array.from(t.querySelectorAll('*[data-type~="item"]')),U.map(He))),He=t=>Ur.fromEither(Kr.decode(t));var pp=t=>Array.from(t.children),np=t=>X.element(t);var Ot={};p(Ot,{from:()=>Pe,to:()=>De,types:()=>Ve});var Pe={};p(Pe,{unknown:()=>Jr,window:()=>ap});var Xr=s(o("fp-ts/function")),Pt=s(o("fp-ts/ReadonlyArray")),Gr=s(o("fp-ts/Option"));var Ve={};p(Ve,{HeaderElement:()=>We});var G=s(o("io-ts")),We=new G.Type("HTMLElement",t=>t instanceof HTMLElement,(t,e)=>t instanceof HTMLElement?G.success(t):G.failure(t,e),t=>t);var ap=t=>Pt.compact((0,Xr.pipe)(Array.from(t.document.querySelectorAll('*[data-type~="header"]')),Pt.map(Jr))),Jr=t=>Gr.fromEither(We.decode(t));var De={};p(De,{children:()=>ip,itemElements:()=>mp});var ip=t=>Array.from(t.children),mp=t=>X.element(t);var Z={};p(Z,{lib:()=>_e,types:()=>Ie});var _e={};p(_e,{back:()=>cp,forward:()=>yp,push:()=>lp});var J=s(o("fp-ts/function")),H=s(o("fp-ts/Option")),Dt=s(o("fp-ts/ReadonlyArray")),lp=t=>e=>(0,J.pipe)(H.fromNullable(e.present),H.fold(()=>({...e,present:t}),r=>({...e,past:[...e.past,r],present:t}))),cp=t=>(0,J.pipe)(t.past,Dt.matchRight(()=>t,(e,r)=>(0,J.pipe)(H.fromNullable(t.present),H.fold(()=>({...t,past:e,present:r}),n=>({past:e,present:r,future:[n,...t.future]}))))),yp=t=>(0,J.pipe)(t.future,Dt.matchLeft(()=>t,(e,r)=>(0,J.pipe)(H.fromNullable(t.present),H.fold(()=>({...t,future:r,present:e}),n=>({past:[...t.past,n],present:e,future:r})))));var Ie={};p(Ie,{History:()=>up});var k=s(o("io-ts"));var _t={};p(_t,{from:()=>qe,types:()=>P});var qe={};p(qe,{path:()=>fp});var fp=t=>({path:t,state:null});var P={};p(P,{Location:()=>dp});var Q=s(o("io-ts")),dp=Q.type({path:Q.string,state:Q.unknown});var up=k.type({past:k.readonlyArray(P.Location),present:k.union([P.Location,k.null]),future:k.readonlyArray(P.Location)});var qt={};p(qt,{from:()=>$e,types:()=>Ye});var $e={};p($e,{closest:()=>Qr,element:()=>bp,event:()=>xp,unknown:()=>gt,window:()=>Ap});var tt=s(o("fp-ts/function")),et=s(o("fp-ts/ReadonlyArray")),rt=s(o("fp-ts/Option"));var Ye={};p(Ye,{LinkElement:()=>ze});var h=s(o("io-ts")),ze=h.intersection([new h.Type("HTMLElement",t=>t instanceof HTMLElement,(t,e)=>t instanceof HTMLElement?h.success(t):h.failure(t,e),t=>t),h.type({href:h.string})]);var xp=t=>(0,tt.pipe)(B.from.unknown(t.target),rt.chain(e=>(0,tt.pipe)(gt(e),rt.alt(()=>Qr(e))))),Qr=t=>(0,tt.pipe)(B.to.closest('*[data-type~="link"]')(t),gt),Ap=t=>et.compact((0,tt.pipe)(Array.from(t.document.querySelectorAll('*[data-type~="link"]')),et.map(gt))),bp=t=>et.compact((0,tt.pipe)(Array.from(t.querySelectorAll('*[data-type~="link"]')),et.map(gt))),gt=t=>rt.fromEither(ze.decode(t));var Tt={};p(Tt,{from:()=>Ue,to:()=>Je,types:()=>Ke});var Ue={};p(Ue,{unknown:()=>eo,window:()=>hp});var Zr=s(o("fp-ts/function")),It=s(o("fp-ts/ReadonlyArray")),to=s(o("fp-ts/Option"));var Ke={};p(Ke,{MainElement:()=>Ne});var ot=s(o("io-ts")),Ne=new ot.Type("HTMLElement",t=>t instanceof HTMLElement,(t,e)=>t instanceof HTMLElement?ot.success(t):ot.failure(t,e),t=>t);var hp=t=>It.compact((0,Zr.pipe)(Array.from(t.document.querySelectorAll('*[data-type~="main"]')),It.map(eo))),eo=t=>to.fromEither(Ne.decode(t));var Je={};p(Je,{children:()=>Sp,sectionElements:()=>vp});var zt={};p(zt,{element:()=>gp,unknown:()=>Ge,window:()=>Op});var Xe=s(o("fp-ts/function")),pt=s(o("fp-ts/ReadonlyArray")),oo=s(o("fp-ts/Option"));var st=s(o("io-ts")),ro=new st.Type("HTMLElement",t=>t instanceof HTMLElement,(t,e)=>t instanceof HTMLElement?st.success(t):st.failure(t,e),t=>t);var Op=t=>pt.compact((0,Xe.pipe)(Array.from(t.document.querySelectorAll('*[data-type~="section"]')),pt.map(Ge))),gp=t=>pt.compact((0,Xe.pipe)(Array.from(t.querySelectorAll('*[data-type~="section"]')),pt.map(Ge))),Ge=t=>oo.fromEither(ro.decode(t));var Sp=t=>Array.from(t.children),vp=t=>zt.element(t);var St=s(o("io-ts")),ua=St.type({clientX:St.number,clientY:St.number});var D=s(o("io-ts")),xa=D.union([D.literal("preload"),D.literal("intro"),D.literal("main"),D.literal("outro")]);var Pp=s(o("fp-ts/function"));var kp=s(o("fp-ts/function")),Yt=s(o("fp-ts/Option"));var E=s(o("io-ts")),po=s(o("io-ts-types")),jp=E.type({identifier:E.string,title:E.string,author:E.string,date:po.date,url:E.string,length:E.number,tags:E.array(E.string)});var $t=s(o("fp-ts/Ord")),ha=$t.fromCompare((t,e)=>t.date.getTime()-e.date.getTime()>0?1:-1),Ea=$t.fromCompare((t,e)=>t.title.localeCompare(e.title)>0?1:-1),Oa=$t.fromCompare((t,e)=>t.length-e.length>0?1:-1);var Nt={};p(Nt,{PostSortType:()=>Hp});var nt=s(o("io-ts")),Hp=nt.union([nt.literal("date"),nt.literal("title"),nt.literal("length")]);var Fp=s(o("fp-ts/function")),Wp=s(o("fp-ts/Ord"));var at={};p(at,{OrderType:()=>Vp});var vt=s(o("io-ts")),Vp=vt.union([vt.literal("ascending"),vt.literal("descending")]);var io=s(o("io-ts"));var ja=io.type({order:at.OrderType,sort:Nt.PostSortType});var mo=s(o("fp-ts/function")),Ze=s(o("fp-ts/Option")),lo=s(o("fp-ts/ReadonlyArray"));var O=s(o("io-ts")),Ip=O.type({identifier:O.string,title:O.string,author:O.string,date:O.string,url:O.string,length:O.string,tags:O.array(O.string)});var Mt=s(o("io-ts")),La=Mt.union([Mt.literal("in"),Mt.literal("out")]);var Kt=s(o("io-ts")),Ca=Kt.type({y:Kt.number});var Xt={};p(Xt,{types:()=>tr});var tr={};p(tr,{ScrollToEvent:()=>Gp});var Ut=s(o("io-ts")),Gp=Ut.type({detail:Ut.number});var on=s(o("fp-ts/function"));var Zp=s(o("fp-ts/function")),Gt=s(o("fp-ts/Option"));var _=s(o("io-ts")),Jp=_.type({name:_.string,size:_.number,url:_.string});var er=s(o("fp-ts/Ord")),Wa=er.fromCompare((t,e)=>t.name.localeCompare(e.name)>0?1:-1),Va=er.fromCompare((t,e)=>t.size-e.size>0?1:-1);var Jt={};p(Jt,{TagSortType:()=>rn});var wt=s(o("io-ts")),rn=wt.union([wt.literal("name"),wt.literal("size")]);var fo=s(o("io-ts"));var Ya=fo.type({order:at.OrderType,sort:Jt.TagSortType});var uo=s(o("fp-ts/function")),rr=s(o("fp-ts/Option")),xo=s(o("fp-ts/ReadonlyArray"));var it=s(o("io-ts")),an=it.type({name:it.string,size:it.string,url:it.string});var xn=s(o("fp-ts/function")),Ao=s(o("fp-ts/ReadonlyArray")),An=s(o("fp-ts/Option"));var R=s(o("io-ts"));var Qt={};p(Qt,{TransitionTrigger:()=>yn});var Rt=s(o("io-ts")),yn=Rt.union([Rt.literal("load"),Rt.literal("viewport")]);var dn=R.intersection([new R.Type("Element",t=>t instanceof Element,(t,e)=>t instanceof Element?R.success(t):R.failure(t,e),t=>t),R.type({dataset:R.type({transition_trigger:Qt.TransitionTrigger})})]);var bo=s(o("fp-ts/Ord")),Xa=bo.fromCompare((t,e)=>t.getBoundingClientRect().top>=e.getBoundingClientRect().top?1:-1);var te={};p(te,{types:()=>or});var or={};p(or,{WheelEvent:()=>Tn});var Zt=s(o("io-ts")),Tn=Zt.type({wheelDeltaY:Zt.number});var Eo={past:[],present:null,future:[]},Sn=i.reducer.from(Eo,{[Me.type]:(t,e)=>Z.lib.push(e.payload)(t),[we.type]:t=>Z.lib.back(t),[Re.type]:t=>Z.lib.forward(t)});var ar={};p(ar,{actions:()=>nr,reducers:()=>lt});var nr={};p(nr,{set:()=>pr});var Oo=s(o("fp-ts/function")),pr=i.actionCreator.from(Oo.identity)("phase/set");var lt={};p(lt,{initialState:()=>go,main:()=>vn});var go="preload",vn=i.reducer.from(go,{[pr.type]:(t,e)=>e.payload});var lr={};p(lr,{actions:()=>mr,reducers:()=>ct});var mr={};p(mr,{set:()=>ir});var To=s(o("fp-ts/function")),ir=i.actionCreator.from(To.identity)("postFilter/set");var ct={};p(ct,{initialState:()=>So,main:()=>Mn});var So={sort:"date",order:"ascending"},Mn=i.reducer.from(So,{[ir.type]:(t,e)=>e.payload});var fr={};p(fr,{actions:()=>yr,reducers:()=>yt});var yr={};p(yr,{set:()=>cr});var vo=s(o("fp-ts/function")),cr=i.actionCreator.from(vo.identity)("postMetadataRecord/set");var yt={};p(yt,{initialState:()=>Mo,main:()=>wn});var Mo={},wn=i.reducer.from(Mo,{[cr.type]:(t,e)=>e.payload});var xr={};p(xr,{actions:()=>ur,reducers:()=>ft});var ur={};p(ur,{set:()=>dr});var wo=s(o("fp-ts/function"));var dr=w.from(wo.identity)("scroll/set");var ft={};p(ft,{initialState:()=>Ro,main:()=>Rn});var Ro={y:0},Rn=V.from(Ro,{[dr.type]:(t,e)=>e.payload});var jt={};p(jt,{actions:()=>Ar,reducers:()=>Sr});var Ar={};I(Ar);var Sr={};p(Sr,{initialState:()=>Co,main:()=>kn});var Er={};p(Er,{actions:()=>hr,reducers:()=>dt});var hr={};p(hr,{set:()=>br});var jo=s(o("fp-ts/function")),br=i.actionCreator.from(jo.identity)("tagFilter/set");var dt={};p(dt,{initialState:()=>Bo,main:()=>jn});var Bo={sort:"name",order:"ascending"},jn=i.reducer.from(Bo,{[br.type]:(t,e)=>e.payload});var Tr={};p(Tr,{actions:()=>gr,reducers:()=>ut});var gr={};p(gr,{set:()=>Or});var ko=s(o("fp-ts/function")),Or=i.actionCreator.from(ko.identity)("tagMetadataRecord/set");var ut={};p(ut,{initialState:()=>Lo,main:()=>Bn});var Lo={},Bn=i.reducer.from(Lo,{[Or.type]:(t,e)=>e.payload});var Co={cursor:Y.initialState,history:mt.initialState,phase:lt.initialState,postFilter:ct.initialState,postMetadataRecord:yt.initialState,scroll:ft.initialState,tagFilter:dt.initialState,tagMetadataRecord:ut.initialState},kn=i.reducer.combine({cursor:Y.main,history:mt.main,phase:lt.main,postFilter:ct.main,postMetadataRecord:yt.main,scroll:ft.main,tagFilter:dt.main,tagMetadataRecord:ut.main},Co);var Ho=(t=jt.reducers.initialState)=>e=>{let r=new F.BehaviorSubject(i.action.noop);return[r.pipe(F.scan(jt.reducers.main,t),F.share(),F.startWith(t)),n=>{r.next(n)}]};var ee=s(o("fp-ts/function")),Cn=s(o("fp-ts/ReadonlyArray")),Hn=s(o("fp-ts/Either")),L=s(o("rxjs"));var re={};p(re,{location:()=>Fo,main:()=>Wn});var j=s(o("fp-ts/function")),g=s(o("fp-ts/Option")),T=s(o("rxjs"));var Wn=t=>e=>Fo(e).pipe(T.tap((0,j.flow)(b.history.actions.push,t[1])),T.tap((0,j.flow)((0,j.constant)(b.phase.actions.set("outro")),t[1]))),Fo=t=>T.fromEvent(t.document,"click").pipe(T.map(e=>(0,j.pipe)(qt.from.event(e),g.map(r=>r.href),g.chainFirst(r=>(0,j.pipe)(g.guard(bt.normalize(r)!==bt.normalize(t.location.href)))),g.apFirst(g.of(e.preventDefault())),g.fold((0,j.constant)(null),j.identity))),T.filter(e=>e!==null),T.distinctUntilChanged(),T.map(_t.from.path));var oe={};p(oe,{main:()=>Vn,offset:()=>Vo,scroll:()=>Wo});var q=s(o("fp-ts/function")),vr=s(o("fp-ts/Either")),a=s(o("rxjs"));var Vn=t=>e=>r=>a.combineLatest([Wo(t)(e)(r),Vo(t)(e)(r)]).pipe(a.map((0,q.constant)(null))),Wo=t=>([e])=>r=>e.pipe(a.map(n=>n.scroll),a.tap(n=>{r.scroll(0,n.y)})),Vo=t=>([e,r])=>n=>a.fromEvent(n,"wheel",{passive:!1}).pipe(a.map(te.types.WheelEvent.decode),a.map(vr.fold((0,q.constant)(null),q.identity)),a.filter(m=>m!==null),a.map(m=>m.wheelDeltaY*.4*-1),a.startWith(0),a.switchScan((m,u)=>a.merge(a.of(m+u),a.fromEvent(n,"scrollTo").pipe(a.map(Xt.types.ScrollToEvent.decode),a.map(vr.fold((0,q.constant)(null),q.identity)),a.filter(x=>x!==null),a.map(x=>x.detail))).pipe(a.map(x=>f.clamp(x,0,n.document.body.scrollHeight-n.document.body.clientHeight))),n.document.body.scrollTop),a.switchScan((m,u)=>t.pipe(a.scan(x=>f.lerpW(x,u,.1)(1e-4),m),a.distinctUntilChanged()),n.scrollY),a.tap(m=>{r(b.scroll.actions.set({y:m}))}));var se=s(o("fp-ts/function")),Mr=s(o("fp-ts/ReadonlyArray")),pe=s(o("rxjs"));var ne={};p(ne,{animate:()=>Do,main:()=>Dn,tick:()=>Po});var l=s(o("fp-ts/function")),S=s(o("fp-ts/ReadonlyArray")),y=s(o("rxjs"));var Dn=t=>e=>r=>Po(t)(e).pipe(y.tap(Do(r)),y.last(),y.tap((0,l.flow)((0,l.constant)(b.phase.actions.set("main")),e[1]))),Po=t=>e=>e[0].pipe(y.map(r=>r.phase),y.filter(r=>r==="intro"),y.take(1),y.switchScan(r=>t.pipe(y.scan(n=>f.lerpW(n,1,.15)(.025),r),y.takeWhile(f.between(f.range(0,1))),y.endWith(1)),0)),Do=t=>A.concat([(0,l.pipe)(A.concat((0,l.pipe)(Ot.from.window(t),S.map(e=>(0,l.pipe)(A.concat((0,l.pipe)(Ot.to.itemElements(e),r=>(0,l.pipe)(r,S.zip(r.map(()=>.4/(r.length-1))),S.mapWithIndex((n,[m,u])=>(0,l.pipe)(x=>{m.style.transform=`translateY(${48-48*x}px)`,m.style.opacity=`${1*x}`},A.between([u*n,u*n+.6])))))))))),A.between([0,.6])),(0,l.pipe)(A.concat((0,l.pipe)(Tt.from.window(t),S.map(e=>(0,l.pipe)(A.concat((0,l.pipe)(Tt.to.sectionElements(e),r=>(0,l.pipe)(r,S.zip(r.map(()=>.4/(r.length-1))),S.mapWithIndex((n,[m,u])=>(0,l.pipe)(x=>{m.style.transform=`translateY(${48-48*x}px)`,m.style.opacity=`${1*x}`},A.between([u*n,u*n+.6])))))))))),A.between([.2,.8])),(0,l.pipe)(A.concat((0,l.pipe)(Et.from.window(t),S.map(e=>(0,l.pipe)(A.concat((0,l.pipe)(Et.to.itemElements(e),r=>(0,l.pipe)(r,S.zip(r.map(()=>.4/(r.length-1))),S.mapWithIndex((n,[m,u])=>(0,l.pipe)(x=>{m.style.transform=`translateY(${48-48*x}px)`,m.style.opacity=`${1*x}`},A.between([u*n,u*n+.6])))))))))),A.between([.4,1]))]);var ae={};p(ae,{main:()=>_n,tick:()=>_o});var c=s(o("rxjs"));var _n=t=>e=>r=>_o(t)(e).pipe(c.last(),c.withLatestFrom(e[0].pipe(c.map(n=>n.history.present),c.filter(n=>n!==null),c.tap(n=>r.location.href=n.path)))),_o=t=>e=>e[0].pipe(c.map(r=>r.phase),c.filter(r=>r==="outro"),c.take(1),c.switchScan(r=>t.pipe(c.scan(n=>f.lerpW(n,1,.15)(.025),r),c.takeWhile(f.between(f.range(0,1))),c.endWith(1)),0));var me={};p(me,{main:()=>qn,tick:()=>qo});var ie=s(o("fp-ts/function")),d=s(o("rxjs"));var qn=t=>e=>r=>qo(t)(e).pipe(d.last(),d.tap((0,ie.flow)((0,ie.constant)(b.phase.actions.set("intro")),e[1]))),qo=t=>e=>e[0].pipe(d.map(r=>r.phase),d.filter(r=>r==="preload"),d.take(1),d.switchScan(r=>t.pipe(d.scan(n=>f.lerpW(n,1,.15)(.025),r),d.takeWhile(f.between(f.range(0,1))),d.endWith(1)),0));var wr=t=>{let e=W.interval(0,W.animationFrameScheduler).pipe(W.share()),r=Ho(b.root.reducers.initialState)(Ft.empty);return W.combineLatest([me.main(e)(r)(t),ne.main(e)(r)(t),ae.main(e)(r)(t),oe.main(e)(r)(t),re.main(r)(t)]).subscribe()};window.document.readyState==="loading"?window.document.addEventListener("DOMContentLoaded",()=>wr(window)):wr(window);})();
